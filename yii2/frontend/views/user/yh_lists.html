<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>U+ 后台管理系统</title>
        <meta name="keywords" content="Bootstrap模版,Bootstrap模版下载,Bootstrap教程,Bootstrap中文" />
        <meta name="description" content="站长素材提供Bootstrap模版,Bootstrap教程,Bootstrap中文翻译等相关Bootstrap插件下载" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- basic styles -->

        <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="assets/css/font-awesome.min.css" />

        <!--[if IE 7]>
          <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />
        <![endif]-->

        <!-- page specific plugin styles -->

        <link rel="stylesheet" href="assets/css/jquery-ui-1.10.3.custom.min.css" />
        <link rel="stylesheet" href="assets/css/jquery.gritter.css" />

        <!-- fonts -->

        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />

        <!-- ace styles -->

        <link rel="stylesheet" href="assets/css/ace.min.css" />
        <link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
        <link rel="stylesheet" href="assets/css/ace-skins.min.css" />

        <!--[if lte IE 8]>
          <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
        <![endif]-->

        <!-- inline styles related to this page -->

        <style>
            .spinner-preview {
                width:100px;
                height:100px;
                text-align:center;
                margin-top:60px;
            }
            
            .dropdown-preview {
                margin:0 5px;
                display:inline-block;
            }
            .dropdown-preview  > .dropdown-menu {
                display: block;
                position: static;
                margin-bottom: 5px;
            }
        </style>

        <!-- ace settings handler -->

        <script src="assets/js/ace-extra.min.js"></script>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

        <!--[if lt IE 9]>
        <script src="assets/js/html5shiv.js"></script>
        <script src="assets/js/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>
        <div class="navbar navbar-default" id="navbar">
            <script type="text/javascript">
                try{ace.settings.check('navbar' , 'fixed')}catch(e){}
            </script>

            <div class="navbar-container" id="navbar-container">
                <div class="navbar-header pull-left">
                    <a href="#" class="navbar-brand">
                        <small>
                            <i class="icon-leaf"></i>
                            U+
                        </small>
                    </a><!-- /.brand -->
                </div><!-- /.navbar-header -->

                <div class="navbar-header pull-right" role="navigation">
                    <ul class="nav ace-nav">
                       <li class="light-blue">
                            <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                                <img class="nav-user-photo" src="assets/avatars/user.jpg" alt="Jason's Photo" />
                                <span class="user-info">
                                    <small>Welcome,</small>
                                    <b><?php echo \Yii::$app->session->get('username')?></b>
                                </span>

                                <i class="icon-caret-down"></i>
                            </a>

                            <ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                                <li>
                                    <a href="#">
                                        <i class="icon-cog"></i>
                                        Settings
                                    </a>
                                </li>

                                <li>
                                    <a href="#">
                                        <i class="icon-user"></i>
                                        Profile
                                    </a>
                                </li>

                                <li class="divider"></li>

                                <li>
                                    <a href="javascript:void(0)" target="_self" onClick="logout();">
                                        <i class="icon-off"></i>
                                        <img src="images/out.gif" alt="安全退出" width="46" height="20" border="0">
                                    </a>
                                    <script language=JavaScript>
                                    function logout(){
                                        if (confirm("您确定要退出控制面板吗？"))
                                        top.location = "index.php?r=login/quit";
                                        return false;

                                    }
                                    </script>
                                    <script language=JavaScript1.2>
                                    function showsubmenu(sid) {
                                        var whichEl = eval("submenu" + sid);
                                        var menuTitle = eval("menuTitle" + sid);
                                        if (whichEl.style.display == "none"){
                                            eval("submenu" + sid + ".style.display=\"\";");
                                        }else{
                                            eval("submenu" + sid + ".style.display=\"none\";");
                                        }
                                    }
                                    </script>
                                    <script language=JavaScript1.2>
                                    function showsubmenu(sid) {
                                        var whichEl = eval("submenu" + sid);
                                        var menuTitle = eval("menuTitle" + sid);
                                        if (whichEl.style.display == "none"){
                                            eval("submenu" + sid + ".style.display=\"\";");
                                        }else{
                                            eval("submenu" + sid + ".style.display=\"none\";");
                                        }
                                    }
                                    </script>
                                </li>
                            </ul>
                        </li>
                    </ul><!-- /.ace-nav -->
                </div><!-- /.navbar-header -->
            </div><!-- /.container -->
        </div>

        <div class="main-container" id="main-container">
            <script type="text/javascript">
                try{ace.settings.check('main-container' , 'fixed')}catch(e){}
            </script>

            <div class="main-container-inner">
                <a class="menu-toggler" id="menu-toggler" href="#">
                    <span class="menu-text"></span>
                </a>

                <div class="sidebar" id="sidebar">
                    <script type="text/javascript">
                        try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
                    </script>

                    
                    <ul class="nav nav-list">
                        <li class="active open">
                            <a href="#" class="dropdown-toggle">
                                <i class="icon-desktop"></i>
                                <span class="menu-text"> 用户管理 </span>

                                <b class="arrow icon-angle-down"></b>
                            </a>

                            <ul class="submenu">
                                <li class="active">
                                    <a href="index.php?r=user/index">
                                        <i class="icon-double-angle-right"></i>
                                        用户列表
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="#" class="dropdown-toggle">
                                <i class="icon-list"></i>
                                <span class="menu-text"> 房东管理 </span>

                                <b class="arrow icon-angle-down"></b>
                            </a>

                            <ul class="submenu">
                                <li>
                                    <a href="index.php?r=fdong/index">
                                        <i class="icon-double-angle-right"></i>
                                        房东列表
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="#" class="dropdown-toggle">
                                <i class="icon-edit"></i>
                                <span class="menu-text"> 房源管理 </span>

                                <b class="arrow icon-angle-down"></b>
                            </a>

                            <ul class="submenu">
                                <li>
                                    <a href="index.php?r=fyuan/index">
                                        <i class="icon-double-angle-right"></i>
                                        房源列表
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="#" class="dropdown-toggle">
                                <i class="icon-tag"></i>
                                <span class="menu-text"> 其他管理 </span>

                                <b class="arrow icon-angle-down"></b>
                            </a>

                            <ul class="submenu">
                                <li>
                                    <a href="profile.html">
                                        <i class="icon-double-angle-right"></i>
                                        用户信息
                                    </a>
                                </li>

                                <li>
                                    <a href="inbox.html">
                                        <i class="icon-double-angle-right"></i>
                                        收件箱
                                    </a>
                                </li>

                                <li>
                                    <a href="pricing.html">
                                        <i class="icon-double-angle-right"></i>
                                        售价单
                                    </a>
                                </li>

                                <li>
                                    <a href="invoice.html">
                                        <i class="icon-double-angle-right"></i>
                                        购物车
                                    </a>
                                </li>

                                <li>
                                    <a href="timeline.html">
                                        <i class="icon-double-angle-right"></i>
                                        时间轴
                                    </a>
                                </li>

                                <li>
                                    <a href="login.html">
                                        <i class="icon-double-angle-right"></i>
                                        登录 &amp; 注册
                                    </a>
                                </li>
                            </ul>
                        </li>

                    </ul><!-- /.nav-左侧 -->

                    <div class="sidebar-collapse" id="sidebar-collapse">
                        <i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>
                    </div>

                    <script type="text/javascript">
                        try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
                    </script>
                </div>

                <div class="main-content">
                    <div class="breadcrumbs" id="breadcrumbs">
                        <script type="text/javascript">
                            try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
                        </script>

                        <ul class="breadcrumb">
                            <li>
                                <i class="icon-home home-icon"></i>
                                <a href="#">用户管理</a>
                            </li>

                            <li>
                                <a href="#">用户列表</a>
                            </li>
                        </ul><!-- .breadcrumb -->

                        <div class="nav-search" id="nav-search">
                            <form class="form-search">
                                <span class="input-icon">
                                    <input type="text" placeholder="搜索 ..." class="nav-search-input" autocomplete="off"  id="search"/>
                                    <a id="search" onclick="search()" href="javascript:void(0)">点击搜索</a>
                                    <i class="icon-search nav-search-icon"></i>
                                </span>
                            </form>
                        </div><!-- #nav-search -->
                    </div>

                    <div class="page-content">
                        <div class="page-header">
                            <h1>
                                用户管理
                                <small>
                                    <i class="icon-double-angle-right"></i>
                                    用户列表
                                </small>
                            </h1>
                            <div class="pull-right">
                                <a class="btn02" onclick="del_all()" href="javascript:void(0)">批量删除</a>
                            </div>
                        </div><!-- /.page-header -->

            
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="table-responsive">
                                    <table id="sample-table-1" class="table table-striped table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th class="center">
                                                    <label>
                                                        <input type="checkbox" class="ace" />
                                                        <span class="lbl">请选择</span>
                                                    </label>
                                                </th>
                                                <th>用户id</th>
                                                <th>用户名称</th>
                                                <th class="hidden-480">用户邮箱</th>
                                                <th>手机号</th>
                                                <th class="hidden-480">用户昵称</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <?php foreach($search as $key=>$val){?>
                                        <tbody>
                                            <tr>
                                                <td class="center">
                                                    <label>
                                                        <input type="checkbox" class="ace" name="id" value="<?php echo $val['u_id']?>">
                                                        <span class="lbl"></span>
                                                    </label>
                                                </td>
                                                <td><?php echo $val['u_id']?></td>
                                                <td><?php echo $val['u_name']?></td>
                                                <td class="hidden-480"><?php echo $val['u_email']?></td>
                                                <td><?php echo $val['u_tel']?></td>
                                                <td class="hidden-480">
                                                    <span class="label label-sm label-warning">
                                                    <?php echo $val['pet_name']?></span>
                                                </td>

                                                <td>
                                                    <a class="edit" href="index.php?r=user/delete&id=<?php echo $val['u_id']?>">
                                                        <i class="icon-trash bigger-120"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <?php }?>
                                    </table>
                                </div><!-- /.table-responsive -->
                            </div><!-- /span -->
                        </div><!-- /row -->
                            

                    </div><!-- /.page-content -->
                </div><!-- /.main-content -->
                
            </div><!-- /.main-container-inner -->

            <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
                <i class="icon-double-angle-up icon-only bigger-110"></i>
            </a>
        </div><!-- /.main-container -->

        <!-- basic scripts -->

        <!--[if !IE]> -->

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

        <!-- <![endif]-->

        <!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->

        <!--[if !IE]> -->

        <script type="text/javascript">
            window.jQuery || document.write("<script src='assets/js/jquery-2.0.3.min.js'>"+"<"+"/script>");
        </script>

        <!-- <![endif]-->

        <!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

        <script type="text/javascript">
            if("ontouchend" in document) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
        </script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/typeahead-bs2.min.js"></script>

        <!-- page specific plugin scripts -->

        <!--[if lte IE 8]>
          <script src="assets/js/excanvas.min.js"></script>
        <![endif]-->

        <script src="assets/js/jquery-ui-1.10.3.custom.min.js"></script>
        <script src="assets/js/jquery.ui.touch-punch.min.js"></script>
        <script src="assets/js/bootbox.min.js"></script>
        <script src="assets/js/jquery.easy-pie-chart.min.js"></script>
        <script src="assets/js/jquery.gritter.min.js"></script>
        <script src="assets/js/spin.min.js"></script>

        <!-- ace scripts -->

        <script src="assets/js/ace-elements.min.js"></script>
        <script src="assets/js/ace.min.js"></script>

        <!-- inline scripts related to this page -->

        <script type="text/javascript">
            jQuery(function($) {
                /**
                $('#myTab a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                  console.log(e.target.getAttribute("href"));
                })
                */
            
            
                $('#accordion-style').on('click', function(ev){
                    var target = $('input', ev.target);
                    var which = parseInt(target.val());
                    if(which == 2) $('#accordion').addClass('accordion-style2');
                     else $('#accordion').removeClass('accordion-style2');
                });
            
            
                var oldie = /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase());
                $('.easy-pie-chart.percentage').each(function(){
                    $(this).easyPieChart({
                        barColor: $(this).data('color'),
                        trackColor: '#EEEEEE',
                        scaleColor: false,
                        lineCap: 'butt',
                        lineWidth: 8,
                        animate: oldie ? false : 1000,
                        size:75
                    }).css('color', $(this).data('color'));
                });
            
                $('[data-rel=tooltip]').tooltip();
                $('[data-rel=popover]').popover({html:true});
            
            
                $('#gritter-regular').on(ace.click_event, function(){
                    $.gritter.add({
                        title: 'This is a regular notice!',
                        text: 'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#" class="blue">magnis dis parturient</a> montes, nascetur ridiculus mus.',
                        image: $path_assets+'/avatars/avatar1.png',
                        sticky: false,
                        time: '',
                        class_name: (!$('#gritter-light').get(0).checked ? 'gritter-light' : '')
                    });
            
                    return false;
                });
            
                $('#gritter-sticky').on(ace.click_event, function(){
                    var unique_id = $.gritter.add({
                        title: 'This is a sticky notice!',
                        text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#" class="red">magnis dis parturient</a> montes, nascetur ridiculus mus.',
                        image: $path_assets+'/avatars/avatar.png',
                        sticky: true,
                        time: '',
                        class_name: 'gritter-info' + (!$('#gritter-light').get(0).checked ? ' gritter-light' : '')
                    });
            
                    return false;
                });
            
            
                $('#gritter-without-image').on(ace.click_event, function(){
                    $.gritter.add({
                        // (string | mandatory) the heading of the notification
                        title: 'This is a notice without an image!',
                        // (string | mandatory) the text inside the notification
                        text: 'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#" class="orange">magnis dis parturient</a> montes, nascetur ridiculus mus.',
                        class_name: 'gritter-success' + (!$('#gritter-light').get(0).checked ? ' gritter-light' : '')
                    });
            
                    return false;
                });
            
            
                $('#gritter-max3').on(ace.click_event, function(){
                    $.gritter.add({
                        title: 'This is a notice with a max of 3 on screen at one time!',
                        text: 'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#" class="green">magnis dis parturient</a> montes, nascetur ridiculus mus.',
                        image: $path_assets+'/avatars/avatar3.png',
                        sticky: false,
                        before_open: function(){
                            if($('.gritter-item-wrapper').length >= 3)
                            {
                                return false;
                            }
                        },
                        class_name: 'gritter-warning' + (!$('#gritter-light').get(0).checked ? ' gritter-light' : '')
                    });
            
                    return false;
                });
            
            
                $('#gritter-center').on(ace.click_event, function(){
                    $.gritter.add({
                        title: 'This is a centered notification',
                        text: 'Just add a "gritter-center" class_name to your $.gritter.add or globally to $.gritter.options.class_name',
                        class_name: 'gritter-info gritter-center' + (!$('#gritter-light').get(0).checked ? ' gritter-light' : '')
                    });
            
                    return false;
                });
                
                $('#gritter-error').on(ace.click_event, function(){
                    $.gritter.add({
                        title: 'This is a warning notification',
                        text: 'Just add a "gritter-light" class_name to your $.gritter.add or globally to $.gritter.options.class_name',
                        class_name: 'gritter-error' + (!$('#gritter-light').get(0).checked ? ' gritter-light' : '')
                    });
            
                    return false;
                });
                    
            
                $("#gritter-remove").on(ace.click_event, function(){
                    $.gritter.removeAll();
                    return false;
                });
                    
            
                ///////
            
            
                $("#bootbox-regular").on(ace.click_event, function() {
                    bootbox.prompt("What is your name?", function(result) {
                        if (result === null) {
                            //Example.show("Prompt dismissed");
                        } else {
                            //Example.show("Hi <b>"+result+"</b>");
                        }
                    });
                });
                    
                $("#bootbox-confirm").on(ace.click_event, function() {
                    bootbox.confirm("Are you sure?", function(result) {
                        if(result) {
                            //
                        }
                    });
                });
                    
                $("#bootbox-options").on(ace.click_event, function() {
                    bootbox.dialog({
                        message: "<span class='bigger-110'>I am a custom dialog with smaller buttons</span>",
                        buttons:            
                        {
                            "success" :
                             {
                                "label" : "<i class='icon-ok'></i> Success!",
                                "className" : "btn-sm btn-success",
                                "callback": function() {
                                    //Example.show("great success");
                                }
                            },
                            "danger" :
                            {
                                "label" : "Danger!",
                                "className" : "btn-sm btn-danger",
                                "callback": function() {
                                    //Example.show("uh oh, look out!");
                                }
                            }, 
                            "click" :
                            {
                                "label" : "Click ME!",
                                "className" : "btn-sm btn-primary",
                                "callback": function() {
                                    //Example.show("Primary button");
                                }
                            }, 
                            "button" :
                            {
                                "label" : "Just a button...",
                                "className" : "btn-sm"
                            }
                        }
                    });
                });
            
            
            
                $('#spinner-opts small').css({display:'inline-block', width:'60px'})
            
                var slide_styles = ['', 'green','red','purple','orange', 'dark'];
                var ii = 0;
                $("#spinner-opts input[type=text]").each(function() {
                    var $this = $(this);
                    $this.hide().after('<span />');
                    $this.next().addClass('ui-slider-small').
                    addClass("inline ui-slider-"+slide_styles[ii++ % slide_styles.length]).
                    css({'width':'125px'}).slider({
                        value:parseInt($this.val()),
                        range: "min",
                        animate:true,
                        min: parseInt($this.data('min')),
                        max: parseInt($this.data('max')),
                        step: parseFloat($this.data('step')),
                        slide: function( event, ui ) {
                            $this.attr('value', ui.value);
                            spinner_update();
                        }
                    });
                });
            
            
            
            
            
                $.fn.spin = function(opts) {
                    this.each(function() {
                      var $this = $(this),
                          data = $this.data();
            
                      if (data.spinner) {
                        data.spinner.stop();
                        delete data.spinner;
                      }
                      if (opts !== false) {
                        data.spinner = new Spinner($.extend({color: $this.css('color')}, opts)).spin(this);
                      }
                    });
                    return this;
                };
            
                function spinner_update() {
                    var opts = {};
                    $('#spinner-opts input[type=text]').each(function() {
                        opts[this.name] = parseFloat(this.value);
                    });
                    $('#spinner-preview').spin(opts);
                }
            
            
            
                $('#id-pills-stacked').removeAttr('checked').on('click', function(){
                    $('.nav-pills').toggleClass('nav-stacked');
                });
            
            
            });
        </script>
    <div style="display:none"><script src='http://v7.cnzz.com/stat.php?id=155540&web_id=155540' language='JavaScript' charset='gb2312'></script></div>
</body>
</html>

<script>
    //搜索
    function search(){
        var search=document.getElementById('search').value;
        //创建ajax对象
        if(search==''){
            alert('至少写出一个名称');
        }else{
            var ajax=new XMLHttpRequest();
            //ajax事件
            ajax.onreadystatechange=function(){
                if(ajax.readyState==4){
                    document.getElementById('div1').innerHTML=ajax.responseText;
                }
            }
            //与服务器连接
            ajax.open('get','index.php?r=user/search&search='+search);
            //处理请求
            ajax.send();
        }
    }

    //批量删除
    function del_all(){
        var id=document.getElementsByName('id')
        var str="";
        //循环出值
        for(i in id){
            if(id[i].checked==true) {
                str+=','+id[i].value;
            }
        }
        //截取值
        u_id=str.substr(1);//alert(str);
        //判断是否有值
        if(str==''){
            alert('至少选择一项');
        }else{
            var ajax=new XMLHttpRequest()
            ajax.onreadystatechange=function(){
                if(ajax.readyState==4){
                    document.getElementById('div1').innerHTML=ajax.responseText;
                }
            }
            ajax.open('get','index.php?r=user/deletes&id='+u_id);
            ajax.send(null);
        }
    }
</script>
